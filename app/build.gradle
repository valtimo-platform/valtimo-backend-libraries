plugins {
    id "com.avast.gradle.docker-compose" version "0.14.5"
}

group = 'com.ritense.valtimo.implementation'
description = 'Valtimo implementation'

dockerCompose.isRequiredBy(bootRun)

bootJar {
    enabled = true
}

jar {
    enabled = false
}

repositories {
    mavenCentral()
    mavenLocal()
}

dependencyManagement {
    imports {
        mavenBom "software.amazon.awssdk:bom:2.15.62"
        mavenBom "org.testcontainers:testcontainers-bom:1.15.1"
        mavenBom "com.fasterxml.jackson:jackson-bom:2.12.1"
        mavenBom "org.junit:junit-bom:5.7.0"
    }
}

dependencies {
    implementation "org.springframework.boot:spring-boot-starter-data-jpa"

    implementation(project(":contract"))
    implementation(project(":core"))
    implementation(project(":keycloak-iam"))
    implementation(project(":web"))
    implementation(project(":audit"))
    implementation(project(":document"))
    implementation(project(":process-document"))
    implementation(project(":form"))
    implementation(project(":form-link"))
    implementation(project(":document-generation:local-document-generation"))
    implementation(project(":openzaak"))
    implementation(project(":resource:local-resource"))
    implementation(project(":mail:local-mail"))

    // Database
    implementation "mysql:mysql-connector-java"
}

test {
    include '**/*Test*'

    ignoreFailures false
    reports.html.enabled = false
    jacoco

    maxHeapSize = '4G'

    testLogging {
        events "passed", "skipped", "failed", "standardError", "standardOut"
    }

    useJUnitPlatform()

    failFast = true
}